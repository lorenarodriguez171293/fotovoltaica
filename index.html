<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Solar Fotovoltaico Estilo Diagrama</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f7f7f7; /* Fondo gris claro */
            color: #333;
        }
        .container {
            max-width: 950px;
            margin: auto;
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden; /* Para las animaciones que puedan salirse */
        }
        h1 {
            color: #4a4a4a; /* Gris oscuro para el t칤tulo */
            text-align: center;
            margin-bottom: 25px;
            font-weight: 600;
        }
        h2 {
            color: #007bff; /* Azul para subt칤tulos */
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            margin-top: 30px;
            margin-bottom: 20px;
        }

        /* --- Contenedor Principal del Diagrama --- */
        .diagram-container {
            position: relative;
            width: 100%;
            height: 450px; /* Altura ajustada para el diagrama */
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            margin-bottom: 30px;
            overflow: hidden; /* Muy importante para que las animaciones de electrones no se desborden */
        }

        /* --- Elementos Est치ticos del Diagrama --- */
        .sun {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background-color: #ff9900; /* Naranja sol */
            border-radius: 50%;
            border: 2px solid #ff9900;
            z-index: 10;
        }
        .sun::before, .sun::after { /* Rayos del sol */
            content: '';
            position: absolute;
            width: 2px;
            height: 15px;
            background-color: #ff9900;
            transform-origin: 50% 100%;
            top: -15px;
            left: 50%;
            margin-left: -1px;
            border-radius: 1px;
        }
        .sun::before { transform: rotate(45deg) translateY(-30px); }
        .sun::after { transform: rotate(-45deg) translateY(-30px); }
        .sun span { /* Rayos adicionales */
            position: absolute;
            width: 2px;
            height: 15px;
            background-color: #ff9900;
            transform-origin: 50% 100%;
            border-radius: 1px;
        }
        .sun span:nth-child(1) { transform: rotate(0deg) translateY(-30px); left: 50%; margin-left: -1px; top: -15px;}
        .sun span:nth-child(2) { transform: rotate(90deg) translateX(30px); top: 50%; margin-top: -1px; right: -15px;}
        .sun span:nth-child(3) { transform: rotate(180deg) translateY(30px); left: 50%; margin-left: -1px; bottom: -15px;}
        .sun span:nth-child(4) { transform: rotate(270deg) translateX(-30px); top: 50%; margin-top: -1px; left: -15px;}
        .sun span:nth-child(5) { transform: rotate(135deg) translate(20px, 20px); top: 50%; margin-left: -1px; right: -15px;} /* Diagonales */
        .sun span:nth-child(6) { transform: rotate(-135deg) translate(-20px, 20px); top: 50%; margin-left: -1px; left: -15px;}
        .sun span:nth-child(7) { transform: rotate(225deg) translate(-20px, -20px); bottom: -15px; left: -15px;}
        .sun span:nth-child(8) { transform: rotate(-45deg) translate(20px, -20px); bottom: -15px; right: -15px;}


        .label {
            position: absolute;
            font-size: 0.9em;
            color: #555;
            white-space: nowrap;
        }
        .label.rad { top: 120px; left: 20px; font-weight: bold; }
        .label.panel { bottom: 10px; left: 100px; font-weight: bold; }
        .label.celulas { top: 90px; left: 370px; font-weight: bold; }
        .label.elect { bottom: 90px; left: 500px; font-weight: bold; }

        .solar-panel-static {
            position: absolute;
            bottom: 80px;
            left: 100px;
            width: 150px;
            height: 100px;
            background-color: #3f51b5; /* Azul oscuro panel */
            border: 2px solid #283593;
            border-radius: 5px;
            z-index: 5;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2px;
            padding: 2px;
        }
        .solar-cell-grid {
            background-color: #283593; /* Celdas m치s oscuras */
            border-radius: 2px;
        }
        .panel-stand {
            position: absolute;
            bottom: 70px;
            left: 170px;
            width: 20px;
            height: 30px;
            background-color: #777;
            transform: skewX(-20deg);
            border-radius: 0 0 5px 5px;
        }

        .cell-zoom {
            position: absolute;
            top: 130px;
            left: 370px;
            width: 120px;
            height: 120px;
            border: 2px solid #555;
            border-radius: 8px;
            background-color: #eee;
            z-index: 10;
        }
        .cell-zoom::before { /* L칤nea de conexi칩n */
            content: '';
            position: absolute;
            width: 2px;
            height: 80px;
            background-color: #555;
            left: -2px;
            top: 50%;
            transform: translateY(-50%) rotate(90deg);
            transform-origin: left center;
        }
        .cell-zoom .inner-cell {
            width: 90px;
            height: 90px;
            background-color: #3f51b5;
            border: 1px solid #283593;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 4px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            padding: 1px;
        }
        .cell-zoom .inner-cell div {
            background-color: #283593;
            border-radius: 1px;
        }

        .battery {
            position: absolute;
            bottom: 60px;
            left: 450px;
            width: 80px;
            height: 50px;
            background-color: #e65100; /* Naranja bater칤a */
            border: 2px solid #bf360c;
            border-radius: 8px;
            z-index: 5;
        }
        .battery::before, .battery::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 15px;
            background-color: #8d6e63;
            border-radius: 3px;
            top: -10px;
        }
        .battery::before { left: 10px; }
        .battery::after { right: 10px; }

        .house {
            position: absolute;
            bottom: 30px;
            right: 50px;
            width: 200px;
            height: 200px;
            border: 2px solid #555;
            border-radius: 5px;
            background-color: #f0f0f0;
            z-index: 5;
        }
        .house .roof {
            position: absolute;
            top: -40px;
            left: -10px;
            width: 0;
            height: 0;
            border-left: 110px solid transparent;
            border-right: 110px solid transparent;
            border-bottom: 50px solid #007bff; /* Techo azul */
        }
        .house .window {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid #555;
            background-color: #add8e6;
            border-radius: 3px;
        }
        .house .window.left { top: 60px; left: 20px; }
        .house .window.right { top: 60px; right: 20px; }
        .house .door {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 80px;
            background-color: #8b4513;
            border: 2px solid #555;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
        }
        .tree {
            position: absolute;
            bottom: 30px;
            right: 10px;
            width: 50px;
            height: 50px;
            background-color: #2e8b57;
            border-radius: 50%;
            border: 2px solid #228b22;
            z-index: 4;
        }
        .tree::before {
            content: '';
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 30px;
            background-color: #8b4513;
            border-radius: 0 0 5px 5px;
        }
        .ground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30px;
            background-color: #e0e0e0; /* Suelo */
            z-index: 1;
        }

        /* --- Animaciones --- */
        /* Fotones (Rayos Solares) */
        .photon {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: #ffcc00; /* Amarillo brillante */
            border-radius: 50%;
            top: 80px; /* Inicia cerca del sol */
            left: 50px;
            opacity: 0;
            z-index: 10;
            animation: photon-path linear infinite;
        }
        @keyframes photon-path {
            0%   { transform: translate(0, 0); opacity: 0; }
            1%   { opacity: 1; } /* Aparece bruscamente */
            50%  { transform: translate(80px, 150px); opacity: 1; } /* Hacia el panel */
            100% { transform: translate(100px, 190px); opacity: 0; } /* Llega al panel y desaparece */
        }
        .photon:nth-child(1) { animation-delay: 0s; animation-duration: 2s; }
        .photon:nth-child(2) { animation-delay: 0.5s; animation-duration: 2.2s; }
        .photon:nth-child(3) { animation-delay: 1s; animation-duration: 2.5s; }
        .photon:nth-child(4) { animation-delay: 1.5s; animation-duration: 1.8s; }
        .photon:nth-child(5) { animation-delay: 2s; animation-duration: 2.3s; }

        /* Electrones (Flujo de Energ칤a) */
        .electron {
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: #007bff; /* Azul para electrones */
            border-radius: 50%;
            opacity: 0; /* Por defecto invisibles */
            z-index: 15;
            animation: electron-flow linear infinite;
        }

        @keyframes electron-flow {
            0% { transform: translate(0px, 0px); opacity: 0; } /* Inicia en el panel */
            1% { opacity: 1; }
            30% { transform: translate(30px, -20px); opacity: 1; } /* Hacia la c칠lula */
            31% { opacity: 0; transform: translate(0,0); } /* Desaparece y reaparece para el siguiente tramo */

            32% { opacity: 1; transform: translate(380px, 100px); } /* Reaparece en la c칠lula */
            60% { transform: translate(380px, 0px); opacity: 1; } /* Baja por el cable */
            61% { opacity: 0; transform: translate(0,0); }

            62% { opacity: 1; transform: translate(450px, -50px); } /* Reaparece en la bater칤a */
            90% { transform: translate(650px, -50px); opacity: 1; } /* Hacia la casa */
            100% { transform: translate(680px, -50px); opacity: 0; } /* Entra en la casa */
        }

        /* Posiciones iniciales y delays para los electrones */
        .electron:nth-child(1) { left: 240px; bottom: 140px; animation-delay: 0s; animation-duration: 8s; }
        .electron:nth-child(2) { left: 240px; bottom: 140px; animation-delay: -2s; animation-duration: 8s; }
        .electron:nth-child(3) { left: 240px; bottom: 140px; animation-delay: -4s; animation-duration: 8s; }


        /* --- Controles y Resultados --- */
        .controls-results {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f0f8ff; /* Azul muy claro */
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        label {
            font-weight: bold;
            color: #4a4a4a;
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 80%; /* Ancho ajustado */
            max-width: 400px;
            margin-bottom: 15px;
        }
        input[type="range"] {
            width: 80%;
            max-width: 400px;
            margin-top: 5px;
        }
        #irradianciaValor {
            font-size: 1.2em;
            color: #28a745; /* Verde para el valor */
        }
        #resultado {
            margin-top: 20px;
            padding: 15px;
            background-color: #d4edda; /* Fondo verde claro */
            border-left: 5px solid #28a745; /* Borde verde */
            border-radius: 4px;
            font-size: 1.1em;
            width: 80%;
            max-width: 400px;
        }
        
        /* Estilos de la descripci칩n */
        .description-arg {
            margin-top: 30px;
            padding: 20px;
            background-color: #e6f7ff; /* Azul claro para la descripci칩n */
            border-left: 5px solid #007bff; /* Borde azul */
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Simulador Interactivo de Energ칤a Solar Fotovoltaica</h1>

        <div class="diagram-container">
            <div class="sun">
                <span></span><span></span><span></span><span></span>
                <span></span><span></span><span></span><span></span>
            </div>
            <span class="label rad">RADIACI칍N SOLAR</span>

            <div class="solar-panel-static">
                <div class="solar-cell-grid"></div><div class="solar-cell-grid"></div><div class="solar-cell-grid"></div><div class="solar-cell-grid"></div>
                <div class="solar-cell-grid"></div><div class="solar-cell-grid"></div><div class="solar-cell-grid"></div><div class="solar-cell-grid"></div>
                <div class="solar-cell-grid"></div><div class="solar-cell-grid"></div><div class="solar-cell-grid"></div><div class="solar-cell-grid"></div>
            </div>
            <div class="panel-stand"></div>
            <span class="label panel">PANEL FOTOVOLTAICO</span>

            <div class="cell-zoom">
                <div class="inner-cell">
                    <div></div><div></div><div></div>
                    <div></div><div></div><div></div>
                    <div></div><div></div><div></div>
                </div>
            </div>
            <span class="label celulas">C칄LULAS FOTOVOLTAICAS</span>

            <div class="battery"></div>

            <div class="house">
                <div class="roof"></div>
                <div class="window left"></div>
                <div class="window right"></div>
                <div class="door"></div>
            </div>
            <span class="label elect">ELECTRICIDAD</span>

            <div class="tree"></div>

            <div class="ground"></div>

            <div class="photon" style="left: 130px; top: 100px;"></div>
            <div class="photon" style="left: 100px; top: 80px;"></div>
            <div class="photon" style="left: 170px; top: 120px;"></div>
            <div class="photon" style="left: 110px; top: 130px;"></div>
            <div class="photon" style="left: 150px; top: 90px;"></div>

            <div class="electron" id="electron1"></div>
            <div class="electron" id="electron2"></div>
            <div class="electron" id="electron3"></div>

            <svg class="connection-line" style="position: absolute; top: 180px; left: 250px; width: 120px; height: 100px; z-index: 2;">
                <line x1="0" y1="50" x2="120" y2="50" stroke="#555" stroke-width="2"/>
                <line x1="120" y1="50" x2="120" y2="10" stroke="#555" stroke-width="2"/>
            </svg>
            <svg class="connection-line" style="position: absolute; top: 220px; left: 490px; width: 100px; height: 50px; z-index: 2;">
                <line x1="0" y1="25" x2="60" y2="25" stroke="#555" stroke-width="2"/>
                <line x1="60" y1="25" x2="60" y2="40" stroke="#555" stroke-width="2"/>
            </svg>
            <svg class="connection-line" style="position: absolute; top: 260px; left: 530px; width: 220px; height: 50px; z-index: 2;">
                <line x1="0" y1="25" x2="200" y2="25" stroke="#555" stroke-width="2"/>
                <line x1="200" y1="25" x2="200" y2="0" stroke="#555" stroke-width="2"/>
            </svg>

        </div>

        <div class="controls-results">
            <label for="irradianciaSolar">
                Irradiancia Solar (W/m):
                <span id="irradianciaValor">1000</span> W/m
            </label>
            <input type="range" id="irradianciaSolar" min="0" max="1000" step="10" value="1000" 
                   oninput="actualizarSimulador(this.value)">

            <div id="resultado">
                </div>
        </div>
        
        ---

        <h2>游뷣릖 Desarrollo de la Energ칤a Solar en Argentina</h2>
        <div class="description-arg">
            <p>El desarrollo de la energ칤a solar fotovoltaica en **Argentina** est치 en fuerte crecimiento, especialmente impulsado por la ley de **Generaci칩n Distribuida** (para usuarios residenciales) y el programa **RenovAr**.</p>
            <p>El pa칤s tiene un potencial solar sobresaliente, particularmente en la regi칩n del **Noroeste Argentino (NOA)**, con provincias como **Jujuy** y **Salta** que tienen algunos de los niveles de radiaci칩n solar m치s altos del mundo.</p>
            <p>Proyectos emblem치ticos, como el parque solar **Cauchari** en Jujuy, demuestran la capacidad de Argentina para implementar grandes infraestructuras solares y posicionarse como un l칤der regional en esta tecnolog칤a renovable.</p>
        </div>
    </div>

    <script>
        // Par치metros Fijos del Panel Solar Gen칠rico (STC: 1000 W/m, 25춿C)
        const areaPanel = 1.6; // 츼rea de un panel est치ndar (aprox. 1.6 m)
        const eficienciaPanel = 0.18; // 18% de eficiencia (valor moderno t칤pico)

        const irradianciaInput = document.getElementById('irradianciaSolar');
        const irradianciaValorSpan = document.getElementById('irradianciaValor');
        const resultadoDiv = document.getElementById('resultado');
        const photonElements = document.querySelectorAll('.photon');
        const electronElements = document.querySelectorAll('.electron');

        function calcularPotencia(I) {
            // I = Irradiancia (W/m)

            // Potencia calculada (W) = 츼rea (m) * Eficiencia * Irradiancia (W/m)
            let potenciaW = areaPanel * eficienciaPanel * I;
            
            // Convertir la potencia a Kilovatios (kW)
            const potenciakW = potenciaW / 1000;

            let mensaje = "";
            let color = "green";

            if (I < 10) {
                mensaje = "Noche o condiciones extremadamente nubladas. Generaci칩n nula.";
                color = "gray";
            } else if (I < 300) {
                mensaje = "D칤a muy nublado o anochecer. Baja generaci칩n.";
                color = "orange";
            } else if (I < 800) {
                mensaje = "D칤a parcialmente nublado o condiciones normales fuera del mediod칤a.";
                color = "blue";
            } else {
                mensaje = "Condiciones 칩ptimas: Sol brillante.";
                color = "green";
            }

            resultadoDiv.innerHTML = `<p><strong>Irradiancia:</strong> ${I} W/m</p>
                                      <p><strong>Potencia Producida:</strong> <strong>${potenciakW.toFixed(2)} kW</strong></p>
                                      <p style="color: ${color}; font-size: 0.9em;">${mensaje}</p>`;
        }

        function controlarAnimacion(I) {
            // Controla la VISIBILIDAD y VELOCIDAD de los fotones
            photonElements.forEach(photon => {
                const opacity = I / 1000; // Opacidad basada en la irradiancia
                photon.style.opacity = opacity > 0.1 ? opacity : 0; // M칤nima opacidad antes de ser 0
                
                // Velocidad de fotones (m치s r치pido con m치s I)
                const maxPhotonDuration = 2.5; // Duraci칩n m치xima (lento)
                const minPhotonDuration = 0.5; // Duraci칩n m칤nima (r치pido)
                let photonDuration = ((1000 - I) / 1000) * (maxPhotonDuration - minPhotonDuration) + minPhotonDuration;
                photon.style.animationDuration = `${photonDuration}s`;
            });

            // Controla la VELOCIDAD de los electrones
            const maxElectronDuration = 8; // Duraci칩n m치xima (m치s lento) en segundos
            const minElectronDuration = 2; // Duraci칩n m칤nima (m치s r치pido) en segundos
            
            let newDuration = ((1000 - I) / 1000) * (maxElectronDuration - minElectronDuration) + minElectronDuration;
            newDuration = Math.max(minElectronDuration, Math.min(maxElectronDuration, newDuration)); 
            
            if (I < 100) { /* Un umbral m치s alto para detener electrones, para no frenar tan bruscamente */
                electronElements.forEach(e => e.style.animationPlayState = 'paused');
            } else {
                electronElements.forEach(electron => {
                    electron.style.animationPlayState = 'running';
                    electron.style.animationDuration = `${newDuration}s`; 
                });
            }
        }

        function actualizarSimulador(IString) {
            const I = parseFloat(IString);
            irradianciaValorSpan.textContent = I;

            calcularPotencia(I);
            controlarAnimacion(I);
        }

        // Inicializar el simulador al cargar la p치gina
        document.addEventListener('DOMContentLoaded', () => {
            const initialI = irradianciaInput.value;
            actualizarSimulador(initialI);
        });
    </script>
</body>
</html>
